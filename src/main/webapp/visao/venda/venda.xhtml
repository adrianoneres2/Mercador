<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" template="/aplicacao.xhtml">

	<ui:define name="conteudoAplicacao">


		<script>
            function mascara(o, f) {
              v_obj = o;
              v_fun = f;
              setTimeout("execmascara()", 1);
            }
            function execmascara() {
              v_obj.value = v_fun(v_obj.value);
            }
         function valor(v) {
        v = v.replace(/\D/g, "");
        v = v.replace(/[0-9]{15}/, "inválido");
        v = v.replace(/(\d{1})(\d{11})$/, "$1.$2"); // coloca ponto antes dos
        // Ãºltimos 11 digitos
        v = v.replace(/(\d{1})(\d{8})$/, "$1.$2"); // coloca ponto antes dos
        // Ãºltimos 8 digitos
        v = v.replace(/(\d{1})(\d{5})$/, "$1.$2"); // coloca ponto antes dos
        // Ãºltimos 5 digitos
        v = v.replace(/(\d{1})(\d{1,2})$/, "$1,$2"); // coloca virgula antes dos
        // Ãºltimos 2 digitos
        return v;
        }

        function valorInteiro(v) {
            v = v.replace(/\D/g, "");
            v = v.replace(/[0-9]{15}/, "inválido");
            return v;
		}
</script>
		<h:form id="idFormVenda">
			<p:growl id="growlvenda" showDetail="true" escape="true"
				closable="true" styleClass="messages" />
			<br />
			<p:layout>
				<p:layoutUnit position="west" resizable="true" size="300"
					minSize="200" maxSize="500">
					<p:panel id="idPanelVenda" style="text-align:left">
						<f:facet name="header">
							<h:outputLabel value="Dados da Venda" />
						</f:facet>
						<p:outputLabel
							value="Código do Caixa: #{vendaVisao.caixa.codigoCaixa}"
							styleClass="ui-widgetGrande" />
						<br />
						<p:inputText styleClass="ui-widgetGrande" disabled="true"></p:inputText>
						<br />
						<br />
						<p:outputLabel
							value="Código da Venda: #{vendaVisao.caixa.codigoCaixa}"
							styleClass="ui-widgetGrande" />
						<br />
						<p:inputText styleClass="ui-widgetGrande" disabled="true"></p:inputText>
						<br />
						<br />
						<p:outputLabel styleClass="ui-widgetGrande"
							value="Valor Total: #{vendaVisao.caixa.codigoCaixa}" />
						<br />
						<br />
						<p:inputText styleClass="ui-widgetGrande"
							value="R$: #{vendaVisao.caixa.codigoCaixa}" disabled="true"></p:inputText>
						<br />
						<br />
						<p:outputLabel styleClass="ui-widgetGrande"
							value="Forma de pagamento: #{vendaVisao.caixa.codigoCaixa}" />
						<br />
						<br />
						<p:selectOneMenu id="idSelectSubCategoria"
						    styleClass="ui-widgetGrande"
							value="" required="true">
							<f:selectItem itemValue="0" itemLabel="Selecione" />
							<f:selectItems
								value="#{vendaVisao.listaFormasPagamento.entrySet()}"
								var="itemFormasPagamento" itemValue="#{itemFormasPagamento.key}"
								itemLabel="#{itemFormasPagamento.value}" />
						</p:selectOneMenu>

						<br />
						<br />
					</p:panel>
					<p:panel>
						<p:commandButton value="Finalizar Venda"
							style="background: green !important;  color: white !important;"></p:commandButton>
						<p:commandButton value="Cancelar Venda"
							style="background: #cc0000 !important; color: white !important;"></p:commandButton>
					</p:panel>
				</p:layoutUnit>

				<p:layoutUnit position="center">
					<p:panel id="idPanelItensVenda">
						<f:facet name="header">
							<h:outputLabel value="Itens da Venda" />
						</f:facet>
						<p:outputLabel
							value="Código do Produto: #{vendaVisao.caixa.codigoCaixa}" />
						<br />
						<p:inputText styleClass="ui-widgetGrande"></p:inputText>
						<br />
						<br />
						<p:dataTable var="produto" value="#{produtoVisao.produtos}"
							rows="10" lazy="true" paginator="false">

							<p:column headerText="Código" width="70">
								<h:outputText value="#{produto.codigoProduto}" />
							</p:column>

							<p:column headerText="Nome" width="200">
								<h:outputText value="#{produto.nomeProduto}" />
							</p:column>

							<p:column headerText="Quantidade" width="30">
								<h:outputText value="#{produto.quantidadeProduto}" />
							</p:column>

							<p:column headerText="Valor" width="50">
								<h:outputText value="#{produto.valorVenda}">
									<f:convertNumber type="currency" />
								</h:outputText>
							</p:column>

							<p:column headerText="Total" width="50">
								<h:outputText value="#{produto.valorVenda}">
									<f:convertNumber type="currency" />
								</h:outputText>
							</p:column>

							<p:column headerText="Ações" width="50">
							</p:column>
						</p:dataTable>

					</p:panel>
				</p:layoutUnit>
			</p:layout>
			<p:spacer />
			<br />
		</h:form>
	</ui:define>
</ui:composition>